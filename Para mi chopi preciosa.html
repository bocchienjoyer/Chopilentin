<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>üíô Cinna Valentine</title>
  <style>
    :root{
      /* Paleta ‚Äúcinnamoroll vibe‚Äù (pastel cielo) */
      --sky1:#bfe8ff;
      --sky2:#eaf8ff;
      --card:#ffffff;
      --ink:#0f172a;
      --muted:#475569;
      --blue:#3aa7ff;
      --pink:#ff7aa2;
      --shadow: 0 18px 50px rgba(2, 41, 74, .18);
      --radius: 26px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans";
      color:var(--ink);
      background:
        radial-gradient(900px 600px at 20% 15%, rgba(255,255,255,.95), rgba(255,255,255,0) 55%),
        radial-gradient(900px 650px at 85% 35%, rgba(255,255,255,.8), rgba(255,255,255,0) 55%),
        linear-gradient(180deg, var(--sky1), var(--sky2));
      overflow-x:hidden;
      overflow-y:auto;
}

    /* Nubes/Corazones flotando (poquitos para que vaya r√°pido) */
    #floaters{
      position:fixed; inset:0; pointer-events:none; overflow:hidden;
    }
    .floater{
      position:absolute;
      font-size: 18px;
      opacity:.0;
      transform: translateY(110vh) scale(var(--s));
      animation: floatUp linear infinite;
      user-select:none;
    }
    @keyframes floatUp{
      0%{ transform: translateY(110vh) scale(var(--s)); opacity:0 }
      15%{opacity:.85}
      100%{ transform: translateY(-20vh) scale(var(--s)); opacity:0 }
    }
    @media (prefers-reduced-motion: reduce){
      .floater{ animation: none; opacity:.35; transform:none; }
    }

    main{
      min-height: 100svh;
      height:auto;
      display:grid;
      place-items:center;
      padding: max(18px, env(safe-area-inset-top)) max(18px, env(safe-area-inset-right)) max(18px, env(safe-area-inset-bottom)) max(18px, env(safe-area-inset-left));
      position:relative;
      z-index:2;
    }

    .screen{ display:none; width:min(860px, 94vw); }
    .screen.active{ display:block; }

    .card{
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: clamp(18px, 3vw, 26px);
      position:relative;
      overflow:hidden;
    }

    /* ‚ÄúBrillos‚Äù suaves dentro del card (no blur pesado) */
    .card::before{
      content:"";
      position:absolute; inset:-1px;
      background:
        radial-gradient(700px 300px at 20% 0%, rgba(58,167,255,.22), transparent 55%),
        radial-gradient(520px 260px at 90% 10%, rgba(255,122,162,.18), transparent 60%);
      pointer-events:none;
    }

    .content{ position:relative; z-index:2; }

    .topRow{
      display:flex;
      gap: 14px;
      align-items:center;
      justify-content:center;
      margin-bottom: 12px;
    }

    .title{
      font-weight: 900;
      letter-spacing: .4px;
      margin: 0;
      font-size: clamp(30px, 6vw, 56px);
      line-height:1.05;
    }
    .subtitle{
      margin: 10px 0 0;
      color: var(--muted);
      font-size: 16px;
      line-height:1.5;
    }

    .btnRow{
      display:flex;
      justify-content:center;

      gap: 12px;
      flex-wrap:wrap;
      margin-top: 18px;
      position:relative;
    }
    button{ font: inherit; cursor:pointer; border:0; }
    .btn{
      padding: 12px 18px;
      border-radius: 16px;
      font-weight: 850;
      transition: transform .12s ease;
      user-select:none;
    }
    .btn:active{ transform: scale(.98); }

    .yes{
      background: linear-gradient(180deg, rgba(58,167,255,1), rgba(36,128,255,1));
      color: white;
      box-shadow: 0 14px 26px rgba(58,167,255,.25);
    }
    .no{
      background: linear-gradient(180deg, rgba(255,122,162,1), rgba(255,85,138,1));
      color: white;
      box-shadow: 0 14px 26px rgba(255,122,162,.25);
    }

    .hint{
      margin: 10px 0 0;
      min-height: 22px;
      color: var(--muted);
      font-weight: 650;
    }

    /* Foto circular en la tarjeta de pregunta */
    .heroPhoto{
      width: 104px; height: 104px;
      border-radius: 999px;
      border: 4px solid rgba(255,255,255,.85);
      box-shadow: 0 12px 25px rgba(2,41,74,.14);
      overflow:hidden;
      flex: 0 0 auto;
    }
    .heroPhoto img{ width:100%; height:100%; object-fit:cover; }

    /* Mascotito (original) estilo ‚Äúcinnamoroll vibe‚Äù */
    .mascot{
      width: 110px;
      height: 72px;
      flex: 0 0 auto;
    }
    @media (max-width:520px){
      .mascot{ display:none; }
      .heroPhoto{ width:90px; height:90px; }
    }

    /* Pantalla YES */
    .bigTitle{
      margin: 0;
      font-size: clamp(30px, 5vw, 46px);
      line-height:1.1;
      font-weight: 900;
    }
    .gallery{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      margin-top: 16px;
    }
    @media (max-width: 600px){
      .gallery{
        display:flex;
        gap: 10px;
        overflow-x:auto;
        padding-bottom: 6px;
        scroll-snap-type:x mandatory;
      }
      .ph{
        flex: 0 0 78%;
        max-width: 78%;
        scroll-snap-align:center;
      }
    }
    .ph{
      border-radius: 18px;
      overflow:hidden;
      box-shadow: 0 14px 28px rgba(2,41,74,.14);
      background: #f3fbff;
      aspect-ratio: 4/3;
    }
    .ph img{
      width:100%; height:100%;
      object-fit: cover;
      display:block;
    }

    .letterBox{
      margin-top: 14px;
      padding: 14px 14px;
      border-radius: 18px;
      background: #f1fbff;
      border: 1px solid rgba(15,23,42,.08);
      color: var(--ink);
      white-space: pre-wrap;
      line-height: 1.55;
      display:none;
    }
    .letterBox.show{ display:block; }



/* =========================
   Intro ‚Äúgordito‚Äù + potitos
   ========================= */
.introCard{ padding: clamp(22px, 4vw, 36px); }
.introGrid{
  display:grid;
  grid-template-columns: 1fr auto 1fr;
  gap: 12px;
  align-items:center;
  min-height: clamp(340px, 52vh, 460px);
}
.introCenter{ text-align:center; }
.introBtnRow{ justify-content:center; }
.potito{
  width: min(170px, 28vw);
  height:auto;
  max-width: 180px;
  filter: drop-shadow(0 12px 20px rgba(2,41,74,.12));
  user-select:none;
  pointer-events:none;
}
.potito.mirror{ transform: scaleX(-1); }
@media (max-width: 420px){
  .potito{ width: min(140px, 30vw); }
}

/* =========================
   Cupidos en pantalla pregunta
   ========================= */
.askCard{ padding-left: clamp(18px, 3vw, 30px); padding-right: clamp(18px, 3vw, 30px); }
.cupid{
  position:absolute;
  top: 20%;
  transform: translateY(-50%);
  width: clamp(110px, 18vw, 170px);
  height:auto;
  z-index: 1;
  pointer-events:none;
  user-select:none;
  opacity: .96;
  filter: drop-shadow(0 14px 24px rgba(2,41,74,.18));
}
.cupid.left{ left: clamp(-38px, -3vw, -10px); }
.cupid.right{ right: clamp(-38px, -3vw, -10px); }
@media (max-width: 520px){
  .cupid{
    top: 12%;
    width: 118px;
  }
  .cupid.left{ left: -34px; }
  .cupid.right{ right: -34px; }
}
@media (max-width: 390px){
  .cupid{ display:none; }
}

/* =========================
   Mascota feliz en pantalla YES
   ========================= */
.yesMascot{
  width: clamp(130px, 22vw, 190px);
  height:auto;
  display:block;
  margin: 0 auto 6px;
  user-select:none;
  pointer-events:none;
  filter: drop-shadow(0 14px 24px rgba(2,41,74,.14));
}

/* =========================
   Cartita: scroll interno (m√≥vil friendly)
   ========================= */
.letterBox{
  max-height: min(56vh, 420px);
  overflow:auto;
  -webkit-overflow-scrolling: touch;
}
@media (max-width: 520px){
  .letterBox{ max-height: 60vh; }
}

/* =========================
   Temblor suave (NO)
   ========================= */
@keyframes shakeIt{
  0%{ transform: translateX(0) rotate(0deg); }
  20%{ transform: translateX(-4px) rotate(-0.6deg); }
  40%{ transform: translateX(4px) rotate(0.6deg); }
  60%{ transform: translateX(-3px) rotate(-0.4deg); }
  80%{ transform: translateX(3px) rotate(0.4deg); }
  100%{ transform: translateX(0) rotate(0deg); }
}
.shake{
  animation: shakeIt .28s ease-in-out;
}

    /* Bot√≥n de m√∫sica discreto */
    #musicBtn{
      position: fixed;
      right: 12px;
      bottom: 12px;
      width: 44px; height: 44px;
      border-radius: 999px;
      background: rgba(255,255,255,.85);
      box-shadow: 0 14px 30px rgba(2,41,74,.15);
      border: 1px solid rgba(15,23,42,.08);
      display:none; /* se muestra solo si configuras musicSrc */
      z-index: 50;
    }
    #musicBtn.on{ background: rgba(255,255,255,.95); }
  </style>
</head>

<body>
  <div id="floaters" aria-hidden="true"></div>

  <!-- M√∫sica (opcional): pon un mp3 en assets y configura musicSrc -->
  <button id="musicBtn" title="M√∫sica">‚ô™</button>
  <audio id="bgm" preload="none" loop></audio>

  <main>
    <!-- =========================
         PANTALLA 1: INTRO
         ========================= -->
    <section id="screen-intro" class="screen active">
  <div class="card introCard">
    <div class="content introGrid">
      <img id="introGifLeft" class="potito" alt="" aria-hidden="true" />

      <div class="introCenter">
        <h1 class="title" id="introTitle">VALENTINE</h1>
        <div class="btnRow introBtnRow" style="margin-top:18px;">
          <button id="btnStart" class="btn yes">Empezar üíó</button>
        </div>
      </div>

      <img id="introGifRight" class="potito mirror" alt="" aria-hidden="true" />
    </div>
  </div>
</section>

    <!-- =========================
         PANTALLA 2: PREGUNTA
         ========================= -->
    <section id="screen-ask" class="screen">
      <div class="card askCard">
        <img id="cupidLeft" class="cupid left" alt="" aria-hidden="true" />
        <img id="cupidRight" class="cupid right" alt="" aria-hidden="true" />
        <div class="content">
          <div class="topRow">
            <div class="heroPhoto" title="foto">
              <img id="heroImg" alt="Foto" />
            </div>
</div>

          <h2 class="bigTitle" id="question">¬øQuieres ser mi Valentine?</h2>
          <p class="subtitle" id="subtext">Prometo risas, detallitos y un d√≠a bonito contigo üíô</p>

          <div class="btnRow" id="btnRow">
            <button id="btnYes" class="btn yes">S√≠ üíó</button>
            <button id="btnNo" class="btn no">No üôà</button>
          </div>

          <p class="hint" id="noHint"></p>
        </div>
      </div>
    </section>

    <!-- =========================
         PANTALLA 3: ACEPT√ì
         ========================= -->
    <section id="screen-yes" class="screen">
      <div class="card">
        <div class="content">
          <img id="yesMascot" class="yesMascot" alt="" aria-hidden="true" />
          <h2 class="bigTitle" id="yesTitle">¬°Yaaay! üíô</h2>
          <p class="subtitle" id="yesMsg">Te quiero much√≠simo.</p>

          <div class="gallery" id="gallery"></div>

          <div class="btnRow" style="margin-top:16px;">
            <button id="btnLetter" class="btn yes">Abrir cartita ‚úâÔ∏è</button>
          </div>

          <div class="letterBox" id="letter"></div>
        </div>
      </div>
    </section>
  </main>

  <script>
    // =========================================================
    // ======================= EDITA AQU√ç =======================
    // =========================================================
    const CONFIG = {
      // Texto grande de la pantalla inicial
      introTitle: "Lo que estabas esperando preciosa, muak üòò",

      // Pregunta principal y subtexto
      question: "¬øQuieres ser mi San Valent√≠n, preciosa? üíó",
      subtext: "Este gorrito te promete esforzarse para pasarla muy lindo juntos ü•πü•∞",



// Im√°genes extra (cinnamoroll assets)
introGifSrc: "assets/potitooo.gif",
potitoLoopMs: 2000,
cupidLeftSrc: "assets/cinnamorollcupidleft.png",
cupidRightSrc: "assets/cinnamorollcupidright.png",
yesMascotSrc: "assets/cinnamorollhappy.png",

      // Pantalla de ‚Äús√≠‚Äù
      yesTitle: "¬°SHIIISISISIISISISISHIIIISHIII! ü•∞üòç",
      yesMsg: "Te amo preciosa m√≠a, mucho muchito ü•∞",

      // Cartita (puedes escribir lo que quieras)
      letter: `Hoya preciosa m√≠a üíó

Ya sabes que siempre te lo repito, pero quiero recordarte lo mucho que me encantas ü•∞.
Perd√≥n por haberme demorado en hacerte esta invitaci√≥n formal, tu gorrito ha estado ocupadito, pero espero que te guste ü•π 
Gracias por siempre, siempre hacerme sentir en casita, por hacer de donde vaya un lugar memorable.
Gracias por ser la novia m√°s linda y divertida del mundo, por hacerme doler la carita de tanto sonre√≠r y reir.
Gracias por escucharme y tomar en cuenta mis payasadas, por siempre ser mi espacio seguro.
Gracias, preciosa m√≠a, por amarme tanto, y por dejarme amarte tanto.

Por eso, preciosa m√≠a, en este, nuestro primer San Valent√≠n juntitos, solo me queda decirte:
Te amo preciososososososa üíóü•∞
`,

      // Mensajes cuando presiona NO (solo 2 veces)
      noMessages: [
        "Amochito? ü•∫",
        "√±io pueeem üò≠",
      ],

      // Foto que sale en la pantalla de la pregunta (tu foto con flores)
      heroPhotoSrc: "assets/flowers.jpg",

      // Fotos que salen cuando le da S√ç (las 3 de ustedes)
      // (Puedes ajustar el ‚Äúposition‚Äù si quieres recortar distinto: 'center 25%', 'center 40%', etc.)
      photos: [
        { src: "assets/together1.jpg", position: "center" },
        { src: "assets/together2.jpg", position: "center" },
        { src: "assets/together3.jpg", position: "center 28%" }, // la ancha: centra rostros
      ],

      // M√∫sica (opcional): pon un mp3 en assets y escribe la ruta aqu√≠.
      // Ej: "assets/musica.mp3"
      musicSrc: "assets/Laufey - Valentine (Official Audio).mp3"
    };
    // =========================================================
    // ===================== FIN ‚ÄúEDITA AQU√ç‚Äù ===================
    // =========================================================

    const $ = (id) => document.getElementById(id);

    const screens = {
      intro: $("screen-intro"),
      ask: $("screen-ask"),
      yes: $("screen-yes"),
    };

    const introTitle = $("introTitle");
    const btnStart = $("btnStart");
    const btnYes = $("btnYes");
    const btnNo = $("btnNo");
    const noHint = $("noHint");

    const heroImg = $("heroImg");

    const introGifLeft = $("introGifLeft");
    const introGifRight = $("introGifRight");
    const cupidLeft = $("cupidLeft");
    const cupidRight = $("cupidRight");
    const yesMascot = $("yesMascot");

    const yesTitle = $("yesTitle");
    const yesMsg = $("yesMsg");
    const gallery = $("gallery");

    const btnLetter = $("btnLetter");
    const letterBox = $("letter");

    const musicBtn = $("musicBtn");
    const bgm = $("bgm");

    let noClicks = 0;
    let noLocked = false;

    // Pintar textos
    introTitle.textContent = CONFIG.introTitle;
    $("question").textContent = CONFIG.question;
    $("subtext").textContent = CONFIG.subtext;
    yesTitle.textContent = CONFIG.yesTitle;
    yesMsg.textContent = CONFIG.yesMsg;

    // Im√°genes
    heroImg.src = CONFIG.heroPhotoSrc;
    introGifLeft.src = CONFIG.introGifSrc;
    introGifRight.src = CONFIG.introGifSrc;
    if (CONFIG.potitoLoopMs && CONFIG.potitoLoopMs > 0){
  forceGifLoop(introGifLeft, CONFIG.potitoLoopMs);
  forceGifLoop(introGifRight, CONFIG.potitoLoopMs);
}
    cupidLeft.src = CONFIG.cupidLeftSrc;
    cupidRight.src = CONFIG.cupidRightSrc;
    yesMascot.src = CONFIG.yesMascotSrc;

    // Galer√≠a
    renderGallery();

    // Fondito flotante
    spawnFloaters(10);

    // M√∫sica (solo si configuras musicSrc)
    if (CONFIG.musicSrc && CONFIG.musicSrc.trim()){
      bgm.src = CONFIG.musicSrc;
      musicBtn.style.display = "grid";
    }

    btnStart.addEventListener("click", async () => {
      show("ask");
      burstFloaters(16);

      // Intentar reproducir m√∫sica (solo funciona con click del usuario)
      if (CONFIG.musicSrc && CONFIG.musicSrc.trim()){
        try{
          await bgm.play();
          musicBtn.classList.add("on");
        }catch{}
      }
    });

    musicBtn.addEventListener("click", async () => {
      if (!CONFIG.musicSrc || !CONFIG.musicSrc.trim()) return;
      if (bgm.paused){
        try{ await bgm.play(); musicBtn.classList.add("on"); }catch{}
      } else {
        bgm.pause(); musicBtn.classList.remove("on");
      }
    });

    btnYes.addEventListener("click", () => {
      show("yes");
      burstFloaters(26);
    });

    // NO: solo deja click 2 veces. Luego se escapa ‚Äúpara siempre‚Äù.
    btnNo.addEventListener("click", (e) => {
      addShake($("screen-ask").querySelector(".card"));
      if (noLocked){
        e.preventDefault();
        moveNoButton();
        return;
      }
      noClicks++;
      const msg = CONFIG.noMessages[Math.min(noClicks - 1, CONFIG.noMessages.length - 1)] || "";
      noHint.textContent = msg;

      moveNoButton();

      if (noClicks >= 2){
        noLocked = true;
      }
    });

    // Cuando ya est√° bloqueado: si te acercas, se escapa
    btnNo.addEventListener("pointerenter", () => {
      if (!noLocked) return;
      moveNoButton();
    });
    btnNo.addEventListener("pointerdown", (e) => {
      if (!noLocked) return;
      e.preventDefault();
      addShake($("screen-ask").querySelector(".card"));
      moveNoButton();
    });

    btnLetter.addEventListener("click", async () => {
      if (letterBox.classList.contains("show")){
        letterBox.classList.remove("show");
        btnLetter.textContent = "Abrir cartita ‚úâÔ∏è";
        return;
      }
      btnLetter.textContent = "Cerrar cartita üíå";
      letterBox.classList.add("show");
      await typeText(letterBox, CONFIG.letter, 10);
    });

    function show(which){
      Object.values(screens).forEach(s => s.classList.remove("active"));
      screens[which].classList.add("active");
    }

    function renderGallery(){
      gallery.innerHTML = "";
      (CONFIG.photos || []).slice(0, 6).forEach((p) => {
        const box = document.createElement("div");
        box.className = "ph";
        const img = document.createElement("img");
        img.src = p.src;
        img.alt = "Foto";
        img.loading = "lazy";
        img.style.objectPosition = p.position || "center";
        box.appendChild(img);
        gallery.appendChild(box);
      });
    }

    

function addShake(el){
  if (!el) return;
  el.classList.remove("shake");
  void el.offsetWidth;
  el.classList.add("shake");
  setTimeout(() => el.classList.remove("shake"), 320);
}
function moveNoButton(){
      const w = window.innerWidth;
      const h = window.innerHeight;
      const rect = btnNo.getBoundingClientRect();
      const pad = 14;

      const maxX = Math.max(pad, w - rect.width - pad);
      const maxY = Math.max(pad, h - rect.height - pad);

      const x = rand(pad, maxX);
      const y = rand(pad, maxY);

      // se vuelve flotante
      btnNo.style.position = "fixed";
      btnNo.style.left = x + "px";
      btnNo.style.top = y + "px";
      btnNo.style.zIndex = "80";
      btnNo.style.transform = `rotate(${rand(-8,8)}deg)`;
    }

    function spawnFloaters(n){
      const wrap = $("floaters");
      wrap.innerHTML = "";
      const emojis = ["‚òÅÔ∏è","üíô","üíñ","‚òÅÔ∏è","üíô","‚ú®"];
      for (let i=0;i<n;i++){
        const s = document.createElement("span");
        s.className = "floater";
        s.textContent = emojis[rand(0, emojis.length-1)];
        const size = rand(16, 26);
        const left = rand(0, 100);
        const dur = rand(8, 14);
        const delay = rand(0, 10);
        const scale = (size / 20).toFixed(2);

        s.style.left = left + "vw";
        s.style.fontSize = size + "px";
        s.style.animationDuration = dur + "s";
        s.style.animationDelay = delay + "s";
        s.style.setProperty("--s", scale);
        wrap.appendChild(s);
      }
    }

    function burstFloaters(n){
      const wrap = $("floaters");
      const emojis = ["üíô","üíñ","‚ú®","‚òÅÔ∏è"];
      for (let i=0;i<n;i++){
        const s = document.createElement("span");
        s.className = "floater";
        s.textContent = emojis[rand(0, emojis.length-1)];
        const size = rand(18, 30);
        const left = rand(5, 95);
        const dur = rand(2, 4);
        const delay = rand(0, 0.7);
        const scale = (size / 22).toFixed(2);

        s.style.left = left + "vw";
        s.style.fontSize = size + "px";
        s.style.animationDuration = dur + "s";
        s.style.animationDelay = delay + "s";
        s.style.setProperty("--s", scale);
        wrap.appendChild(s);

        setTimeout(()=> s.remove(), (dur + delay + 0.2) * 1000);
      }
    }

    async function typeText(el, text, msPerChar=12){
      el.textContent = "";
      for (let i=0; i<text.length; i++){
        el.textContent += text[i];
        await sleep(msPerChar);
      }
    }
    function sleep(ms){ return new Promise(r => setTimeout(r, ms)); }
    function rand(a,b){ return Math.floor(Math.random()*(b-a+1))+a; }

    function forceGifLoop(imgEl, ms){
  // Reinicia el GIF re-asignando src con cache-buster (local/cach√©)
  const base = imgEl.dataset.baseSrc || imgEl.src;
  imgEl.dataset.baseSrc = base;

  setInterval(() => {
    const sep = base.includes("?") ? "&" : "?";
    imgEl.src = base + sep + "loop=" + Date.now();
  }, ms);
}
    window.addEventListener("resize", () => {
      // si est√° flotando, reub√≠calo dentro de la pantalla
      if (btnNo.style.position === "fixed"){
        moveNoButton();
      }
    });
  </script>
</body>
</html>
