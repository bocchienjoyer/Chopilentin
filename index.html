<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>San Valent√≠n üíó</title>
  <style>
    :root{
      --bg1:#eaf6ff;
      --bg2:#fff3f8;
      --card:#ffffffcc;
      --border:#e7eef7;
      --text:#0f172a;
      --muted:#475569;
      --blue:#3b82f6;
      --pink:#fb7185;
      --shadow: 0 18px 55px rgba(15,23,42,.12);
      --r: 28px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color:var(--text);
      background:
        radial-gradient(900px 650px at 20% 10%, var(--bg2), transparent 55%),
        radial-gradient(900px 650px at 80% 30%, var(--bg1), transparent 60%),
        linear-gradient(180deg, #f6fbff, #fdf7fb);
      overflow-x:hidden;
    }

    main{
      min-height:100vh;
      padding: calc(16px + env(safe-area-inset-top)) 14px calc(20px + env(safe-area-inset-bottom));
      display:grid;
      place-items:center;
    }

    .screen{display:none; width:min(920px, 92vw); }
    .screen.active{display:block; animation: pop .22s ease-out;}
    @keyframes pop{from{opacity:0; transform:translateY(6px)} to{opacity:1; transform:translateY(0)}}

    .card{
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--r);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      overflow: visible;
    }

    /* ========= INTRO ========= */
    .introCard{
      padding: 18px 16px 20px;
      position:relative;
      min-height: clamp(420px, 70vh, 600px);
      display:grid;
      align-items:center;
    }
    .introGrid{
      display:grid;
      grid-template-columns: clamp(90px, 18vw, 140px) 1fr clamp(90px, 18vw, 140px);
      gap: 10px;
      align-items:center;
    }
    .potito{
      width: 100%;
      max-width: 140px;
      height:auto;
      justify-self:center;
      filter: drop-shadow(0 10px 18px rgba(15,23,42,.10));
      opacity:.98;
      user-select:none;
      -webkit-user-drag:none;
    }
    .potito.mirror{ transform: scaleX(-1); }

    .introContent{
      text-align:center;
      padding: 8px 6px;
    }
    .introTitle{
      margin: 0 0 10px;
      font-weight: 900;
      letter-spacing:.2px;
      font-size: clamp(34px, 6vw, 56px);
      line-height: 1.05;
    }
    .introSub{
      margin: 0 0 14px;
      color: var(--muted);
      font-size: clamp(15px, 3.6vw, 18px);
      line-height:1.35;
    }

    .btnRow{
      display:flex;
      justify-content:center;
      margin-top: 10px;
    }
    .btn{
      border:0;
      cursor:pointer;
      font: inherit;
      font-weight: 900;
      letter-spacing:.2px;
      border-radius: 18px;
      padding: 14px 20px;
      min-width: 210px;
      background: linear-gradient(180deg, #60a5fa, #3b82f6);
      color: #ffffff;
      box-shadow: 0 14px 28px rgba(59,130,246,.22);
      transition: transform .12s ease, filter .12s ease;
    }
    .btn:active{ transform: scale(.98); }

    /* ========= ASK ========= */
    .askWrap{ position:relative; overflow: visible; }
    .askCard{ padding: 20px 18px 18px; }
    .heroPhoto{
      width: 96px; height: 96px;
      border-radius: 999px;
      border: 5px solid rgba(255,255,255,.95);
      box-shadow: 0 14px 30px rgba(15,23,42,.14);
      margin: 0 auto 10px;
      display:block;
      object-fit: cover;
      background:#fff;
    }
    h2{
      margin: 0 0 10px;
      text-align:center;
      font-weight: 950;
      letter-spacing:.2px;
      font-size: clamp(28px, 5.8vw, 44px);
      line-height: 1.08;
    }
    .subtext{
      text-align:center;
      color: var(--muted);
      margin: 0 auto 14px;
      max-width: 44ch;
      font-size: 16px;
      line-height: 1.45;
    }

    .btns{
      display:flex;
      gap: 12px;
      justify-content:center;
      flex-wrap:wrap;
      margin-top: 4px;
      position:relative;
      z-index: 2;
    }
    .yes{
      background: linear-gradient(180deg, #60a5fa, #3b82f6);
    }
    .no{
      background: linear-gradient(180deg, #fb7185, #f43f5e);
    }
    .btn.small{
      min-width: 150px;
      padding: 13px 18px;
      border-radius: 16px;
      box-shadow: 0 14px 28px rgba(15,23,42,.12);
    }

    .hint{
      text-align:center;
      margin: 12px 0 0;
      color: #334155;
      font-weight: 750;
      min-height: 22px;
    }

    .cupid{
      position:absolute;
      top: 30%;
      width: clamp(74px, 18vw, 120px);
      height:auto;
      pointer-events:none;
      user-select:none;
      -webkit-user-drag:none;
      filter: drop-shadow(0 14px 22px rgba(15,23,42,.14));
      z-index: 1;
      opacity: .98;
    }
    .cupid.left{ left: -18px; }
    .cupid.right{ right: -18px; }

    /* ========= YES ========= */
    .yesCard{ padding: 18px 18px 16px; }
    .mascot{
      width: 140px;
      height:auto;
      display:block;
      margin: 6px auto 4px;
      user-select:none;
      -webkit-user-drag:none;
      filter: drop-shadow(0 14px 22px rgba(15,23,42,.12));
    }
    .yesTitle{
      text-align:center;
      margin: 6px 0 6px;
      font-weight: 950;
      font-size: clamp(30px, 6vw, 48px);
      line-height:1.05;
    }
    .yesMsg{
      text-align:center;
      margin: 0 0 14px;
      color: var(--muted);
      font-size: 16px;
    }

    .gallery{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      margin: 10px 0 14px;
    }
    .ph{
      border-radius: 18px;
      overflow:hidden;
      border: 1px solid var(--border);
      background:#fff;
      aspect-ratio: 4/3;
    }
    .ph img{
      width:100%;
      height:100%;
      object-fit: cover;
      display:block;
    }

    .letterBox{
      border: 1px solid var(--border);
      background: #ffffffd6;
      border-radius: 18px;
      padding: 14px 14px;
      color: #0f172a;
      line-height: 1.55;
      white-space: pre-wrap;
      max-height: min(46vh, 360px);
      overflow:auto;
      -webkit-overflow-scrolling: touch;
      display:none;
    }
    .letterBox.show{ display:block; }

    .ghost{
      background: #ffffff;
      border: 1px solid var(--border);
      color: #0f172a;
    }

    .floating-no{
      position: fixed !important;
      z-index: 50;
    }

    @media (max-width: 520px){
      main{ padding: calc(14px + env(safe-area-inset-top)) 12px calc(18px + env(safe-area-inset-bottom)); }
      .screen{ width: min(96vw, 560px); }
      .introCard{ min-height: clamp(450px, 72vh, 620px); }
      .introGrid{ grid-template-columns: 86px 1fr 86px; gap: 6px; }
      .heroPhoto{ width: 108px; height: 108px; }
      .cupid{ top: 20%; width: 88px; }
      .cupid.left{ left: -10px; }
      .cupid.right{ right: -10px; }
      .gallery{
        grid-template-columns: 1fr;
        display:flex;
        overflow-x:auto;
        gap: 10px;
        padding-bottom: 6px;
        scroll-snap-type: x mandatory;
      }
      .ph{ min-width: 78vw; scroll-snap-align: center; }
      .btn.small{ min-width: 140px; }
    }

    @keyframes wiggle{
      0%{transform:translateX(0)}
      20%{transform:translateX(-6px)}
      40%{transform:translateX(6px)}
      60%{transform:translateX(-4px)}
      80%{transform:translateX(4px)}
      100%{transform:translateX(0)}
    }
    .wiggle{ animation: wiggle .26s ease-out; }
  </style>
</head>

<body>
  <main>
    <section id="screenIntro" class="screen active">
      <div class="card introCard">
        <div class="introGrid">
          <img id="potitoLeft" class="potito" alt="cinnamoroll" src="assets/potitooo.gif">
          <div class="introContent">
            <h1 class="introTitle" id="introTitle">Lo que estabas esperando üíô</h1>
            <p class="introSub" id="introSub">Muak ü•∫</p>
            <div class="btnRow">
              <button id="btnStart" class="btn">Empezar üíó</button>
            </div>
          </div>
          <img id="potitoRight" class="potito mirror" alt="cinnamoroll" src="assets/potitooo.gif">
        </div>
      </div>
    </section>

    <section id="screenAsk" class="screen">
      <div class="askWrap">
        <img id="cupidLeft" class="cupid left" alt="cupido" src="assets/cinnamorollcupidleft.png">
        <img id="cupidRight" class="cupid right" alt="cupido" src="assets/cinnamorollcupidright.png">

        <div class="card askCard">
          <img id="heroPhoto" class="heroPhoto" alt="foto" src="assets/flowers.jpg">
          <h2 id="question">¬øQuieres ser mi San Valent√≠n?</h2>
          <p id="subtext" class="subtext">Este gorrito te promete esforzarse para pasarla lindo juntos üíó</p>

          <div class="btns">
            <button id="btnYes" class="btn small yes">S√≠ üíó</button>
            <button id="btnNo" class="btn small no">No üò≠</button>
          </div>

          <div id="noHint" class="hint"></div>
        </div>
      </div>
    </section>

    <section id="screenYes" class="screen">
      <div class="card yesCard">
        <img id="yesMascot" class="mascot" alt="cinnamoroll feliz" src="assets/cinnamorollhappy.png">
        <div class="yesTitle" id="yesTitle">¬°SHIIIII! ü•∞</div>
        <div class="yesMsg" id="yesMsg">Te amo preciosa m√≠a, mucho muchito üíû</div>

        <div id="gallery" class="gallery"></div>

        <div class="btnRow" style="gap:12px; flex-wrap:wrap;">
          <button id="btnLetter" class="btn small ghost">Abrir cartita ‚úâÔ∏è</button>
        </div>

        <div id="letterBox" class="letterBox"></div>
      </div>
    </section>
  </main>

  <audio id="bgm" preload="auto" loop></audio>

  <script>
    // ======================= EDITA AQU√ç =======================
    const CONFIG = {
      introTitle: "Lo que estabas esperando preciosa, muak üòò",
      introSub: "",
      question: "¬øQuieres ser mi San Valent√≠n, preciosa? üíó",
      subtext: "Este gorrito te promete esforzarse para pasarla muy lindo juntos ü•πü•∞",
      yesTitle: "¬°SHIIISISIISI! ü•∞üòç",
      yesMsg: "Te amo preciosa m√≠a, mucho muchito ü•∞",
      letter: `Hoya preciosa m√≠a üíó

Ya sabes que siempre te lo repito, pero quiero recordarte lo mucho que me encantas ü•∞.
Perd√≥n por haberme demorado en hacerte esta invitaci√≥n formal, tu gorrito ha estado ocupadito, pero espero que te guste ü•π 
Gracias por siempre, siempre hacerme sentir en casita, por hacer de donde vaya un lugar memorable.
Gracias por ser la novia m√°s linda y divertida del mundo, por hacerme doler la carita de tanto sonre√≠r y reir.
Gracias por escucharme y tomar en cuenta mis payasadas, por siempre ser mi espacio seguro.
Gracias, preciosa m√≠a, por amarme tanto, y por dejarme amarte tanto.

Por eso, preciosa m√≠a, en este, nuestro primer San Valent√≠n juntitos, solo me queda decirte:
Te amo preciososososososa üíóü•∞
`,

      introGifSrc: "assets/potitooo.gif",
      cupidLeftSrc: "assets/cinnamorollcupidleft.png",
      cupidRightSrc: "assets/cinnamorollcupidright.png",
      yesMascotSrc: "assets/cinnamorollhappy.png",
      heroPhotoSrc: "assets/flowers.jpg",

      photos: [
        { src: "assets/together1.jpg", position: "center 35%" },
        { src: "assets/together2.jpg", position: "center 35%" },
        { src: "assets/together3.jpg", position: "center 35%" },
      ],

      musicSrc: "assets/Laufey - Valentine (Official Audio).mp3",
      musicVolume: 0.75,

      noAfterTries: 2,
      noPhrases: ["Amochito? ü•∫", "√±io pueeem üò≠"]
    };

    const $ = (id) => document.getElementById(id);

    const screenIntro = $("screenIntro");
    const screenAsk = $("screenAsk");
    const screenYes = $("screenYes");

    const btnStart = $("btnStart");
    const btnYes = $("btnYes");
    const btnNo = $("btnNo");
    const btnLetter = $("btnLetter");

    const introTitle = $("introTitle");
    const introSub = $("introSub");
    const question = $("question");
    const subtext = $("subtext");
    const yesTitle = $("yesTitle");
    const yesMsg = $("yesMsg");
    const letterBox = $("letterBox");
    const noHint = $("noHint");

    const potitoLeft = $("potitoLeft");
    const potitoRight = $("potitoRight");
    const cupidLeft = $("cupidLeft");
    const cupidRight = $("cupidRight");
    const yesMascot = $("yesMascot");
    const heroPhoto = $("heroPhoto");

    const gallery = $("gallery");
    const bgm = $("bgm");

    let noTries = 0;
    let yesScale = 1;

    introTitle.textContent = CONFIG.introTitle;
    introSub.textContent = CONFIG.introSub || "";
    question.textContent = CONFIG.question;
    subtext.textContent = CONFIG.subtext;
    yesTitle.textContent = CONFIG.yesTitle;
    yesMsg.textContent = CONFIG.yesMsg;

    potitoLeft.src = CONFIG.introGifSrc;
    potitoRight.src = CONFIG.introGifSrc;
    cupidLeft.src = CONFIG.cupidLeftSrc;
    cupidRight.src = CONFIG.cupidRightSrc;
    yesMascot.src = CONFIG.yesMascotSrc;
    heroPhoto.src = CONFIG.heroPhotoSrc;

    renderGallery();

    if (CONFIG.musicSrc){
      bgm.src = CONFIG.musicSrc;
      bgm.volume = clamp01(CONFIG.musicVolume ?? 0.75);
    }

    btnStart.addEventListener("click", async () => {
      show(screenAsk);

      if (CONFIG.musicSrc){
        try { await bgm.play(); } catch (e) {
          const unlock = async () => {
            try { await bgm.play(); } catch {}
          };
          window.addEventListener("pointerdown", unlock, { capture:true, once:true });
        }
      }
    });

    btnYes.addEventListener("click", () => {
      show(screenYes);
      burstHearts(26);
    });

    btnNo.addEventListener("pointerdown", (e) => {
      e.preventDefault();
      wiggle(btnNo);

      noTries++;

      yesScale = Math.min(1.65, yesScale + 0.06);
      btnYes.style.transform = `scale(${yesScale})`;

      if (noTries <= CONFIG.noAfterTries){
        noHint.textContent = CONFIG.noPhrases[Math.min(noTries-1, CONFIG.noPhrases.length-1)] || "";
        moveNoButton();
      } else {
        noHint.textContent = CONFIG.noPhrases[CONFIG.noPhrases.length-1] || "";
        moveNoButton();
      }
    });

    btnLetter.addEventListener("click", () => {
      const open = !letterBox.classList.contains("show");
      if (!open){
        letterBox.classList.remove("show");
        btnLetter.textContent = "Abrir cartita ‚úâÔ∏è";
        return;
      }
      btnLetter.textContent = "Cerrar cartita üíå";
      letterBox.classList.add("show");
      letterBox.textContent = CONFIG.letter;
      letterBox.scrollTop = 0;
    });

    function show(el){
      [screenIntro, screenAsk, screenYes].forEach(s => s.classList.remove("active"));
      el.classList.add("active");

      if (el === screenAsk){
        noTries = 0;
        yesScale = 1;
        btnYes.style.transform = "";
        noHint.textContent = "";
        btnNo.classList.remove("floating-no");
        btnNo.style.left = "";
        btnNo.style.top = "";
        btnNo.style.transform = "";
      }
      if (el === screenYes){
        window.scrollTo({ top: 0, behavior: "instant" });
      }
    }

    function renderGallery(){
      gallery.innerHTML = "";
      (CONFIG.photos || []).slice(0,6).forEach(p => {
        const box = document.createElement("div");
        box.className = "ph";
        const img = document.createElement("img");
        img.src = p.src;
        img.alt = "foto";
        img.loading = "lazy";
        img.style.objectPosition = p.position || "center 50%";
        box.appendChild(img);
        gallery.appendChild(box);
      });
    }

    function moveNoButton(){
      const w = window.innerWidth;
      const h = window.innerHeight;

      const rect = btnNo.getBoundingClientRect();
      const pad = 12;

      const maxX = Math.max(pad, w - rect.width - pad);
      const maxY = Math.max(pad, h - rect.height - pad);

      const x = rand(pad, maxX);
      const y = rand(pad, maxY);

      btnNo.classList.add("floating-no");
      btnNo.style.left = x + "px";
      btnNo.style.top = y + "px";
      btnNo.style.transform = `rotate(${rand(-8,8)}deg)`;
    }

    function wiggle(el){
      el.classList.remove("wiggle");
      void el.offsetWidth;
      el.classList.add("wiggle");
    }

    function burstHearts(n){
      const wrap = document.createElement("div");
      wrap.style.position="fixed";
      wrap.style.inset="0";
      wrap.style.pointerEvents="none";
      wrap.style.zIndex="99";
      document.body.appendChild(wrap);

      for (let i=0;i<n;i++){
        const s = document.createElement("span");
        s.textContent = Math.random()>.3 ? "üíó" : "üíô";
        s.style.position="absolute";
        s.style.left = rand(8,92) + "vw";
        s.style.bottom = "-10px";
        s.style.fontSize = rand(18,30) + "px";
        s.style.opacity = "0";
        s.style.transition = "transform 1.6s ease, opacity .6s ease";
        wrap.appendChild(s);

        requestAnimationFrame(() => {
          s.style.opacity = "1";
          s.style.transform = `translateY(-${rand(520,820)}px)`;
          setTimeout(()=>{ s.style.opacity="0"; }, 900);
          setTimeout(()=>{ s.remove(); }, 1700);
        });
      }
      setTimeout(()=> wrap.remove(), 1900);
    }

    function rand(a,b){ return Math.floor(Math.random()*(b-a+1))+a; }
    function clamp01(x){ return Math.max(0, Math.min(1, Number(x))); }
  </script>
</body>
</html>
